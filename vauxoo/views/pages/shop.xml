<?xml version="1.0" encoding="utf-8"?>
<odoo>
    <template id="shop" inherit_id="website_sale.products">
        <!-- HEADER FOR SHOP -->
        <xpath expr="//div[@class='js_sale']" position="before">
            <section class="s_body_content text-center header-pentagon header-pentagon-shop" style="background-image: url(/web/image/theme_vauxoo.apps);">
                <div class="container">
                    <div class="row">
                        <h1>For every need
                            <br class="hidden-xs hidden-sm"/>
                            there is an app.</h1>
                        <p>Explore our library of apps that can be integrated into your workflow to enhance the
                            <br class="hidden-xs hidden-sm"/>
                            productivity and sales of your business.</p>
                    </div>
                    <div class="row text-center arrow-pentagon-shop">
                      <a href="#wrap" class="smoothly">
                        <img src="/web/image/theme_vauxoo.scroll-down"/>
                      </a>
                    </div>
                </div>
            </section>
            <section class="s_body_content bg-white vertical-chevron vertical-chevron-shop"/>
        </xpath>
        <!-- ADDED EXTRA CLASS TO GENERATE A NAMESPACE FOR THE LESS UNDER `js-sale-pentagon-shop` -->
        <xpath expr="//div[@class='js_sale']" position="attributes">
            <attribute name="class">js_sale bg-cream js-sale-pentagon-shop</attribute>
        </xpath>
        <!-- ADDED EXTRA CLASS TO THE CATEGORIES COLUMN FILTERER IN ORDER TO ACHIEVE DIV BORDER AND SPACING IN THE BOTTOM -->
        <xpath expr="//div[@id='products_grid_before']" position="attributes">
            <attribute name="class">bordered-div col-md-3 col-sm-4</attribute>
        </xpath>
    </template>
    <!-- HIDDING THE PAGER ON MOBILE AND TABLET SIZES -->
    <template id="hide_pagination_mobile" inherit_id="website.pager">
        <xpath expr="//ul" position="attributes">
            <attribute name="t-attf-class">#{ classname or '' } pagination hidden-xs hidden-sm</attribute>
        </xpath>
    </template>
    <!-- THE TEMPLATE THAT WILL DISPLAY THE PRODUCTS AS A 'RETINA' NAMESPACED UNDER `product-retina-view` ON LESS -->
    <template id="products_retina_view" inherit_id="website_sale.products" active="False" customize_show="True" name="Retina Product View">
        <xpath expr="//div[@id='products_grid']//table" position="replace">
            <t t-foreach="products" t-as="product">
                <div class="product-retina-view col-lg-4 col-md-4 col-sm-6 col-xs-12 mb32" t-att-data-publish="product.website_published and 'on' or 'off'">
                    <form action="/shop/cart/update" method="post">
                        <input type="hidden" name="csrf_token" t-att-value="request.csrf_token()" />
                        <a itemprop="url" t-att-href="keep('/shop/product/%s' % slug(product), page=(pager['page']['num'] if pager['page']['num']&gt;1 else None))">
                        <div itemscope="itemscope" itemtype="http://schema.org/Product" class="product-card bordered-div">
                            <div class="card-image text-center" t-att-style="'background-image: url(/website/image/product.product/%s/image/265x265)' %(product.id)">
                            </div>
                            <t t-if="show_publish">
                                <div id="website_published_button" class="" groups="sales_team.group_sale_manager">
                                    <t t-call="website.publish_management">
                                        <t t-set="object" t-value="product" />
                                        <t t-set="publish_edit" t-value="True" />
                                        <t t-set="action" t-value="'product.product_template_action'" />
                                    </t>
                                </div>
                            </t>
                            <section class="hidden-sm hidden-xs">
                                <h4>
                                    <a itemprop="name" t-att-href="keep('/shop/product/%s' % slug(product), page=(pager['page']['num'] if pager['page']['num']&gt;1 else None))" t-field="product.name" />
                                </h4>
                                <t t-call="rating.rating_star_card">
                                    <t t-set="rating_stat" t-value="product.rating_get_stats([('website_published', '=', True)])"/>
                                    <t t-set="max_rate" t-value="5"/>
                                    <t t-set="min_rate" t-value="1"/>
                                    <t t-set="rating_default_value" t-value="'%.2f' % (rating_stat.get('avg', 0.0),)"/>
                                    <t t-set="rating_disabled" t-value="True"/>
                                </t>
                                <div itemprop="offers" itemscope="itemscope" itemtype="http://schema.org/Offer" class="product_price text-right" t-if="product.product_variant_ids">

                                        <t t-if="(compute_currency(product.lst_price) - product.website_price ) &gt; 0.01  and website.get_current_pricelist().discount_policy=='without_discount'">
                                            <del class="text-danger mr8" style="white-space: nowrap;" t-esc="compute_currency(product.website_public_price)" t-options="{'widget': 'monetary', 'display_currency': website.get_current_pricelist().currency_id, 'from_currency': website.currency_id}" />
                                        </t>

                                        <span t-esc="product.website_price" t-options="{'widget': 'monetary', 'display_currency': website.currency_id}"/>
                                        <span itemprop="price" style="display:none;" t-esc="product.website_price" />
                                        <span itemprop="priceCurrency" t-esc="website.currency_id.name" />

                                </div>
                            </section>
                            <section class="hidden-md hidden-lg text-center">
                                <h4>
                                    <a itemprop="name" t-att-href="keep('/shop/product/%s' % slug(product), page=(pager['page']['num'] if pager['page']['num']&gt;1 else None))" t-field="product.name" />
                                </h4>
                                <t t-call="rating.rating_star_card">
                                    <t t-set="rating_stat" t-value="product.rating_get_stats([('website_published', '=', True)])"/>
                                    <t t-set="max_rate" t-value="5"/>
                                    <t t-set="min_rate" t-value="1"/>
                                    <t t-set="rating_default_value" t-value="'%.2f' % (rating_stat.get('avg', 0.0),)"/>
                                    <t t-set="rating_disabled" t-value="True"/>
                                </t>
                                <div itemprop="offers" itemscope="itemscope" itemtype="http://schema.org/Offer" class="product_price" t-if="product.product_variant_ids">

                                        <t t-if="(compute_currency(product.lst_price) - product.website_price ) &gt; 0.01  and website.get_current_pricelist().discount_policy=='without_discount'">
                                            <del class="text-danger mr8" style="white-space: nowrap;" t-esc="compute_currency(product.website_public_price)" t-options="{'widget': 'monetary', 'display_currency': website.get_current_pricelist().currency_id, 'from_currency': website.currency_id}" />
                                        </t>

                                        <span t-esc="product.website_price" t-options="{'widget': 'monetary', 'display_currency': website.currency_id}"/>
                                        <span itemprop="price" style="display:none;" t-esc="product.website_price" />
                                        <span itemprop="priceCurrency" t-esc="website.currency_id.name" />

                                </div>
                            </section>
                        </div>
                        </a>
                    </form>
                </div>
            </t>
        </xpath>
    </template>
    <!-- TEMPALATE THAT ADDS THE `product.description` FIELD ON TOP OF THE IMAGE OF THE PRODUCT MADE `customize_show='True'` BECAUSE SOMETIMES THE DESCRIPTION IS TOO LONG AND IT DOES NOT FIT -->
    <template id="product_description_retina" inherit_id="products_retina_view" name="Show Sale Description" customize_show="True">
        <xpath expr="//div[@class='card-image text-center']" position="inside">
            <h5 class="description mt0" t-esc="product.description"></h5>
        </xpath>
    </template>
</odoo>
